<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Orthocare - User Management</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f4f6f8;
    }

    .sidebar {
      width: 250px;
      background-color: #2d4569;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      color: white;
      z-index: 200;
    }

    .sidebar a {
      display: block;
      padding: 15px 20px;
      color: white;
      text-decoration: none;
      border-left: 4px solid transparent;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background-color: #1f324d;
      border-left: 4px solid #92b4d3;
    }

    .header {
      background-color: #2d4569;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: fixed;
      top: 0;
      right: 0;
      left: 250px;
      z-index: 100;
      height: 50px;
    }

    .header-title {
      font-size: 18px;
      font-weight: bold;
    }

    .header-icons {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .main-content {
      margin-left: 250px;
      padding: 70px 20px 20px 20px;
    }

    .container {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    h2 {
      margin-top: 0;
      font-size: 24px;
      font-weight: 600;
      color: #2d4569;
    }

    .top-buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 20px;
    }

    .search-bar {
      flex-grow: 1;
      max-width: 300px;
    }

    .search-input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .top-buttons button {
      background-color: #2d4569;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .top-buttons button:hover {
      background-color: #1f324d;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab-button {
      background-color: #2d4569;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .tab-button:hover, .tab-button.active {
      background-color: #00acc1;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background-color: #2d4569;
      color: white;
    }

    th, td {
      padding: 12px 15px;
      border: 1px solid #ccc;
      text-align: left;
    }

    .action-cell {
      position: relative;
    }

    .action-dots {
      cursor: pointer;
      font-weight: bold;
      text-align: center;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: white;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
      border-radius: 4px;
    }

    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .dropdown-content a:hover {
      background-color: #f1f1f1;
    }

    .show {
      display: block;
    }

    .deactivate-link {
      color: red;
    }

    .pagination {
      text-align: center;
      margin-top: 20px;
    }

    .pagination a {
      display: inline-block;
      padding: 8px 12px;
      margin: 0 5px;
      border: 1px solid #2d4569;
      color: #2d4569;
      text-decoration: none;
      border-radius: 5px;
    }

    .pagination a.active,
    .pagination a:hover {
      background-color: #2d4569;
      color: white;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      width: 500px;
      position: relative;
    }
    
    .close-button {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 20px;
      cursor: pointer;
    }
    
    .modal-header {
      color: #2d4569;
      margin-bottom: 20px;
      font-size: 18px;
      display: flex;
      align-items: center;
    }
    
    .user-profile-pic {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 5px;
      margin-right: 20px;
    }
    
    .user-details {
      flex-grow: 1;
    }
    
    .user-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .user-specialization {
      color: #666;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #2d4569;
      font-weight: bold;
    }
    
    .form-control {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    
    .modal-buttons {
      text-align: right;
      margin-top: 20px;
    }
    
    .modal-button {
      padding: 8px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .modal-button.primary {
      background-color: #2d4569;
      color: white;
    }
    
    .modal-button.secondary {
      background-color: #ccc;
      color: #333;
      margin-right: 10px;
    }
    
    .add-new-modal {
      width: 600px;
    }
    
    .add-form-row {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .add-form-column {
      flex: 1;
    }
    
    .logo {
      width: 150px;
      height: 150px;
      display: block;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <a href="#">Dashboard</a>
    <a href="#">Patient Management</a>
    <a href="#" class="active">User Management</a>
    <a href="#">Appointment</a>
    <a href="#">Transactions</a>
    <a href="#">Treatments</a>
    <a href="#">Dental Cases</a>
    <a href="#">Settings</a>
  </div>

  <div class="header">
    <div class="header-title">Admin | User Management</div>
    <div class="header-icons">
      <span>ðŸ””</span>
      <span>ðŸ‘¤</span>
    </div>
  </div>

  <div class="main-content">
    <div class="container">
      <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGNpcmNsZSBjeD0iNzUiIGN5PSI3NSIgcj0iNjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzJkNDU2OSIgc3Ryb2tlLXdpZHRoPSIzIiAvPgogIDxwYXRoIGQ9Ik01MC4xODQ1LDg1LjA0MTUgQzUwLjE4NDUsODUuMDQxNSA0Mi41NzE0LDkzLjYzNzMgNDYuMzU4MSw5Ny40MjQgQzUwLjE0NDgsOTUuMTM2MSA1Mi4xLDg1LjA0MTUgNTAuMTg0NSw4NS4wNDE1IFoiIGZpbGw9IiMwMGFjYzEiIC8+CiAgPHBhdGggZD0iTTk5LjgxNTUsODUuMDQxNSBDOTkuODE1NSw4NS4wNDE1IDEwNy40Mjg2LDkzLjYzNzMgMTAzLjY0MTksOTcuNDI0IEM5OS44NTUyLDk1LjEzNjEgOTcuOSw4NS4wNDE1IDk5LjgxNTUsODUuMDQxNSBaIiBmaWxsPSIjMDBhY2MxIiAvPgogIDxwYXRoIGQ9Ik03NSw0NSBDNTUsMzUgMzAsNDUgMzAsNjUgQzMwLDg1IDQ1LDkwIDQ1LDkwIEwyMCw5MCBMMjAsOTUgTDEzMCw5NSBMMTMwLDkwIEwxMDUsOTAgQzEwNSw5MCAxMjAsODUgMTIwLDY1IEMxMjAsNDUgOTUsMzUgNzUsNDUgWiIgZmlsbD0iIzAwYWNjMSIgLz4KICA8dGV4dCB4PSI1MCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMmQ0NTY5Ij5PUlRIT0NBUkU8L3RleHQ+Cjwvc3ZnPg==" alt="Orthocare Logo" class="logo">

      <div class="top-buttons">
        <div class="search-bar">
          <input type="text" placeholder="Search..." class="search-input">
        </div>
        <button>+ Add New User</button>
      </div>

      <div class="tabs">
        <button class="tab-button active">Dentist(s)</button>
        <button class="tab-button">Staff(s)</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>LASTNAME</th>
            <th>FIRSTNAME</th>
            <th>CONTACT NO.</th>
            <th>EMAIL ADDRESS</th>
            <th>SPECIALIZATION</th>
            <th>ACTION</th>
          </tr>
        </thead>
        <tbody>Get-ChildItem "C:\Users\Administrator\Desktop"

          <tr>
            <td>Romales</td>
            <td>Nancy</td>
            <td>09310159072</td>
            <td>nancyr@mail.com</td>
            <td>Oral Surgery</td>
            <td class="action-cell">
              <div class="action-dots" onclick="toggleDropdown(this)">...</div>
              <div class="dropdown-content">
                <a href="#" onclick="openUserModal(1)">View Details</a>
                <a href="#" class="deactivate-link">Deactivate</a>
              </div>
            </td>
          </tr>
          <tr>
            <td>Araneta</td>
            <td>Juanito Vince</td>
            <td>08310159072</td>
            <td>araneta@mail.com</td>
            <td>Pediatric Dentistry</td>
            <td class="action-cell">
              <div class="action-dots" onclick="toggleDropdown(this)">...</div>
              <div class="dropdown-content">
                <a href="#" onclick="openUserModal(2)">View Details</a>
                <a href="#" class="deactivate-link">Deactivate</a>
              </div>
            </td>
          </tr>
          <tr>
            <td>Lacayon</td>
            <td>John Paul</td>
            <td>09310159072</td>
            <td>jplacayon@mail.com</td>
            <td>Prosthodontics</td>
            <td class="action-cell">
              <div class="action-dots" onclick="toggleDropdown(this)">...</div>
              <div class="dropdown-content">
                <a href="#" onclick="openUserModal(3)">View Details</a>
                <a href="#" class="deactivate-link">Deactivate</a>
              </div>
            </td>
          </tr>
          <tr>
            <td>Wenceslao</td>
            <td>Kent</td>
            <td>09310159072</td>
            <td>N/A</td>
            <td>Endodontics</td>
            <td class="action-cell">
              <div class="action-dots" onclick="toggleDropdown(this)">...</div>
              <div class="dropdown-content">
                <a href="#" onclick="openUserModal(4)">View Details</a>
                <a href="#" class="deactivate-link">Deactivate</a>
              </div>
            </td>
          </tr>
          <tr>
            <td>Rizal</td>
            <td>Jose</td>
            <td>09310159072</td>
            <td>N/A</td>
            <td>Orthodontics</td>
            <td class="action-cell">
              <div class="action-dots" onclick="toggleDropdown(this)">...</div>
              <div class="dropdown-content">
                <a href="#" onclick="openUserModal(5)">View Details</a>
                <a href="#" class="deactivate-link">Deactivate</a>
              </div>
            </td>
          </tr>
          <tr>
            <td>Montemar</td>
            <td>Jherick Isokh</td>
            <td>09310159072</td>
            <td>N/A</td>
            <td>Oral Pathology</td>
            <td class="action-cell">
              <div class="action-dots" onclick="toggleDropdown(this)">...</div>
              <div class="dropdown-content">
                <a href="#" onclick="openUserModal(6)">View Details</a>
                <a href="#" class="deactivate-link">Deactivate</a>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="pagination">
        <a href="#">&laquo;</a>
        <a href="#" class="active">1</a>
        <a href="#">2</a>
        <a href="#">&raquo;</a>
      </div>
    </div>
  </div>

  <!-- User Details Modal -->
  <div id="userModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="closeUserModal()">&times;</span>
      <div class="modal-header">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjQ1IiBmaWxsPSIjZTBlMGUwIi8+CiAgICA8Y2lyY2xlIGN4PSI1MCIgY3k9IjQwIiByPSIxNSIgZmlsbD0iIzhjOGM4YyIvPgogICAgPHBhdGggZD0iTTI1LDcwIEMyNSw1NSA3NSw1NSA3NSw3MCBDNZUFTRUJBTEQNZUFTRUJBTEBNMPU4MCBMNzUuODAgQzc1LDkwIDI1LDkwIDI1LDgwIFoiIGZpbGw9IiM4YzhjOGMiLz4KPC9zdmc+" alt="User Profile" class="user-profile-pic">
        <div class="user-details">
          <div class="user-title">Dr. Maria Fedlliga</div>
          <div class="user-specialization">Orthodontics</div>
        </div>
      </div>
      <div class="form-group">
        <label for="emailAddress">Email address :</label>
        <input type="email" id="emailAddress" class="form-control" value="maria@orthocare.com">
      </div>
      <div class="form-group">
        <label for="contactNumber">Contact Number :</label>
        <input type="text" id="contactNumber" class="form-control" value="09310159072">
      </div>
      <div class="modal-buttons">
        <button class="modal-button primary">EDIT</button>
      </div>
    </div>
  </div>

  <!-- Add New User Modal -->
  <div id="addUserModal" class="modal">
    <div class="modal-content add-new-modal">
      <span class="close-button" onclick="closeAddModal()">&times;</span>
      <h2 style="color: #2d4569; margin-bottom: 20px;">Add New User</h2>
      
      <form id="addUserForm" method="POST" action="/add_user">
        <div class="add-form-row">
          <div class="add-form-column">
            <div class="form-group">
              <label for="firstName">First Name:</label>
              <input type="text" id="firstName" name="firstName" class="form-control" required>
            </div>
          </div>
          <div class="add-form-column">
            <div class="form-group">
              <label for="lastName">Last Name:</label>
              <input type="text" id="lastName" name="lastName" class="form-control" required>
            </div>
          </div>
        </div>
        
        <div class="add-form-row">
          <div class="add-form-column">
            <div class="form-group">
              <label for="contactNumber">Contact Number:</label>
              <input type="text" id="contactNumber" name="contactNumber" class="form-control" required>
            </div>
          </div>
          <div class="add-form-column">
            <div class="form-group">
              <label for="emailAddress">Email Address:</label>
              <input type="email" id="emailAddress" name="emailAddress" class="form-control">
            </div>
          </div>
        </div>
        
        <div class="add-form-row">
          <div class="add-form-column">
            <div class="form-group">
              <label for="userRole">User Role:</label>
              <select id="userRole" name="userRole" class="form-control" onchange="showSpecializationField()" required>
                <option value="">Select Role</option>
                <option value="dentist">Dentist</option>
                <option value="staff">Staff</option>
              </select>
            </div>
          </div>
          <div class="add-form-column" id="specializationColumn" style="display: none;">
            <div class="form-group">
              <label for="specialization">Specialization:</label>
              <select id="specialization" name="specialization" class="form-control">
                <option value="">Select Specialization</option>
                <option value="Orthodontics">Orthodontics</option>
                <option value="Endodontics">Endodontics</option>
                <option value="Periodontics">Periodontics</option>
                <option value="Prosthodontics">Prosthodontics</option>
                <option value="Oral Surgery">Oral Surgery</option>
                <option value="Pediatric Dentistry">Pediatric Dentistry</option>
                <option value="Oral Pathology">Oral Pathology</option>
                <option value="General Dentistry">General Dentistry</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="profileImage">Profile Image (Optional):</label>
          <input type="file" id="profileImage" name="profileImage" class="form-control">
        </div>
        
        <div class="modal-buttons">
          <button type="button" class="modal-button secondary" onclick="closeAddModal()">Cancel</button>
          <button type="submit" class="modal-button primary">Save User</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Toggle dropdown menu for action buttons
    function toggleDropdown(element) {
      // Close all dropdowns first
      var dropdowns = document.getElementsByClassName("dropdown-content");
      for (var i = 0; i < dropdowns.length; i++) {
        if (dropdowns[i].classList.contains('show')) {
          dropdowns[i].classList.remove('show');
        }
      }
      
      // Show the clicked dropdown
      var dropdown = element.nextElementSibling;
      dropdown.classList.toggle("show");
    }

    // Function to open user modal and populate with data from the table
    function openUserModal(userId) {
      // Get the modal element
      const modal = document.getElementById('userModal');
      
      // Find the clicked row by using the userId as an index (adjusting for zero-based indexing)
      const rows = document.querySelector('table tbody').rows;
      const rowIndex = userId - 1;
      
      if (rowIndex >= 0 && rowIndex < rows.length) {
        const row = rows[rowIndex];
        
        // Extract data from the row
        const lastName = row.cells[0].textContent;
        const firstName = row.cells[1].textContent;
        const contactNumber = row.cells[2].textContent;
        const email = row.cells[3].textContent;
        const specialization = row.cells[4].textContent;
        
        // Populate the modal with data
        const userTitle = document.querySelector('.user-title');
        userTitle.textContent = `Dr. ${firstName} ${lastName}`;
        
        const userSpecialization = document.querySelector('.user-specialization');
        userSpecialization.textContent = specialization;
        
        const emailInput = document.getElementById('emailAddress');
        emailInput.value = email !== 'N/A' ? email : '';
        
        const contactInput = document.getElementById('contactNumber');
        contactInput.value = contactNumber;
        
        // Display the modal
        modal.style.display = 'flex';
      }
    }
    
    // Close User Modal
    function closeUserModal() {
      document.getElementById('userModal').style.display = 'none';
    }
    
    // Open Add User Modal
    function openAddModal() {
      document.getElementById('addUserModal').style.display = 'flex';
    }
    
    // Close Add User Modal
    function closeAddModal() {
      document.getElementById('addUserModal').style.display = 'none';
    }

    // Show/Hide Specialization field based on user role
    function showSpecializationField() {
      const userRole = document.getElementById('userRole').value;
      const specializationColumn = document.getElementById('specializationColumn');
      const specializationSelect = document.getElementById('specialization');
      
      if (userRole === 'dentist') {
        specializationColumn.style.display = 'block';
        specializationSelect.setAttribute('required', 'required');
      } else {
        specializationColumn.style.display = 'none';
        specializationSelect.removeAttribute('required');
      }
    }

    // Close dropdowns and modals when clicking outside
    window.onclick = function(event) {
      // Close dropdowns when clicking outside
      if (!event.target.matches('.action-dots')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        for (var i = 0; i < dropdowns.length; i++) {
          if (dropdowns[i].classList.contains('show')) {
            dropdowns[i].classList.remove('show');
          }
        }
      }
      
      // Close modals when clicking outside
      const userModal = document.getElementById('userModal');
      const addUserModal = document.getElementById('addUserModal');
      
      if (event.target == userModal) {
        closeUserModal();
      }
      if (event.target == addUserModal) {
        closeAddModal();
      }
    }

    // Add event listener to "Add New User" button
    document.querySelector('.top-buttons button').addEventListener('click', function() {
      openAddModal();
    });

    // Add click event to Edit button in user modal
    document.querySelector('.modal-button.primary').addEventListener('click', function() {
      // Get the updated values
      const email = document.getElementById('emailAddress').value;
      const contactNumber = document.getElementById('contactNumber').value;
      
      // Here you'd typically save these values via AJAX to your backend
      // For now, we'll just close the modal after "saving"
      alert('Changes saved successfully!');
      closeUserModal();
    });

    // Tab management
    var tabButtons = document.querySelectorAll('.tab-button');
    tabButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        tabButtons.forEach(function(btn) {
          btn.classList.remove('active');
        });
        button.classList.add('active');
      });
    });
  </script>
</body>
</html>